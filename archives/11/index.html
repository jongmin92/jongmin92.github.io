<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>92Hz</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="92Hz"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="92Hz"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="website"><meta property="og:title" content="92Hz"><meta property="og:url" content="https://jongmin92.github.io/"><meta property="og:site_name" content="92Hz"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://jongmin92.github.io/img/og_image.png"><meta property="article:author" content="KimJongMin"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jongmin92.github.io"},"headline":"92Hz","image":["https://jongmin92.github.io/img/og_image.png"],"author":{"@type":"Person","name":"KimJongMin"},"description":""}</script><link rel="alternate" href="/rss2.xml" title="92Hz" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-90389042-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-90389042-1');</script><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3921438651818825" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="92Hz" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-01-29T12:00:00.000Z" title="1/29/2018, 9:00:00 PM">2018-01-29</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-03-21T11:06:57.852Z" title="3/21/2021, 8:06:57 PM">2021-03-21</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">14분안에 읽기 (약 2078 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/01/29/Programming/android-retrofit2-okhttp3/">Retrofit2 + OkHttp3 사용하기</a></h1><div class="content"><p>신입사원 프로젝트로 간만에 안드로이드 개발을 하게됐습니다. 서버와 통신하기위해 Square에서 만든 Retrofit 라이브러리를 사용했는데, 기존에 사용하던 버전(1.x)과 변경된 부분이 많아 새롭게 사용법을 알아보고자 합니다.<br>Retrofit 테스트는 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://reqres.in/">API 테스트 사이트</a>를 통해서 Fake data를 가져오는 실습을 해보겠습니다. 해당 글의 대부분은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.journaldev.com/13639/retrofit-android-example-tutorial">Retrofit 2.0 Example</a>을 참고했습니다.</p>
<h2 id="Retrofit2"><a href="#Retrofit2" class="headerlink" title="Retrofit2"></a>Retrofit2</h2><p>Retrofit 의외에 다른 라이브러리도 있지만, Retrofit을 사용하기로 한 이유는 성능과 간단한 구현방법 때문입니다. 아래 보시는것과 같이 응답속도가 매우 빠른것으로 나와있습니다. 더 자세한 비교는 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://instructure.github.io/blog/2013/12/09/volley-vs-retrofit/">Android Async HTTP Clients: Volley vs Retrofit</a>에서 볼 수 있습니다.</p>
<p><img src="/images/post/2018-01-29/retrofit_benchmark.png" alt="Retrofit Benchmark"></p>
<p>Retrofit2는 기본적으로 OkHttp를 네트워킹 계층으로 활용하며 그 위에 구축됩니다.</p>
<p>Retrofit은 자동적으로 JSON 응답을 사전에 정의된 POJO를 통해 직렬화 할 수 있습니다. JSON을 직렬화 하기 위해서는 먼저 Gson converter가 필요합니다. **<code>build.gradle</code>**에 다음의 dependencies를 추가합니다.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.squareup.retrofit2:retrofit:2.3.0&#x27;</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.google.code.gson:gson:2.8.0&#x27;</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.squareup.retrofit2:converter-gson:2.1.0&#x27;</span></span><br></pre></td></tr></table></figure>
<p>OkHttp는 이미 Retrofit2 모듈의 종속성에 포함되어 있어, 별도의 OkHttp 설정이 필요하다면 다음과 같이 Retrofit2에서 OkHttp 종속성을 제외해야 합니다.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span>(<span class="string">&#x27;com.squareup.retrofit2:retrofit:2.3.0&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">exclude</span> module: <span class="string">&#x27;okhttp&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.google.code.gson:gson:2.8.0&#x27;</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.squareup.retrofit2:converter-gson:2.1.0&#x27;</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.squareup.okhttp3:okhttp:3.9.1&#x27;</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&#x27;com.squareup.okhttp3:logging-interceptor:3.9.1&#x27;</span></span><br><span class="line"><span class="comment">// logging-interceptor는 반환된 모든 응답에 대해 로그 문자열을 생성합니다.</span></span><br></pre></td></tr></table></figure>

<p>네트워크 사용을 위해서 **<code>AndroidManifest.xml</code>**에서 Internet Permission을 추가합니다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="OkHttp-Interceptors"><a href="#OkHttp-Interceptors" class="headerlink" title="OkHttp Interceptors"></a>OkHttp Interceptors</h2><p>**<code>Interceptor</code>**는 OkHttp에 있는 강력한 메커니즘으로 호출을 모니터, 재 작성 및 재 시도를 할 수 있습니다. Interceptor는 크게 두 가지 카테고리로 분류할 수 있습니다.</p>
<ul>
<li><strong>Application Interceptors</strong> : Application Interceptor를 등록하려면 <code>OkHttpClient.Builder</code>에서 <code>addInterceptor()</code>를 호출해야 합니다.</li>
<li><strong>Network Interceptors</strong> : Network Interceptor를 등록하려면 <code>addInterceptor()</code> 대신 <code>addNetworkInterceptor()</code>를 추가해야 합니다.</li>
</ul>
<h2 id="Retrofit-Interface-설정"><a href="#Retrofit-Interface-설정" class="headerlink" title="Retrofit Interface 설정"></a>Retrofit Interface 설정</h2><h3 id="APIClient-java"><a href="#APIClient-java" class="headerlink" title="APIClient.java"></a>APIClient.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> okhttp3.OkHttpClient;</span><br><span class="line"><span class="keyword">import</span> okhttp3.logging.HttpLoggingInterceptor;</span><br><span class="line"><span class="keyword">import</span> retrofit2.Retrofit;</span><br><span class="line"><span class="keyword">import</span> retrofit2.converter.gson.GsonConverterFactory;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit retrofit = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> Retrofit <span class="title">getClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HttpLoggingInterceptor interceptor = <span class="keyword">new</span> HttpLoggingInterceptor();</span><br><span class="line">        interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);</span><br><span class="line">        OkHttpClient client = <span class="keyword">new</span> OkHttpClient.Builder().addInterceptor(interceptor).build();</span><br><span class="line"></span><br><span class="line">        retrofit = <span class="keyword">new</span> Retrofit.Builder()</span><br><span class="line">                .baseUrl(<span class="string">&quot;https://reqres.in/&quot;</span>)</span><br><span class="line">                .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">                .client(client)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> retrofit;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>getClient()</code> 메서드는 Retrofit 인터페이스를 설정할 때마다 호출됩니다. Retrofit은 **<code>@GET, @POST, @PUT, @DELETE, @PATCH or @HEAD</code>**와 같은 <strong>annotation</strong>을 통해 HTTP method를 이용합니다.</p>
<h3 id="APIInterface-java"><a href="#APIInterface-java" class="headerlink" title="APIInterface.java"></a>APIInterface.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.MultipleResource;</span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.UserList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> retrofit2.Call;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.Body;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.Field;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.FormUrlEncoded;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.GET;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.POST;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.Query;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">APIInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET(&quot;api/unknown&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;MultipleResource&gt; <span class="title">doGetListResources</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@POST(&quot;api/users&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;User&gt; <span class="title">createUser</span><span class="params">(<span class="meta">@Body</span> User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET(&quot;api/users?&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;UserList&gt; <span class="title">doGetUserList</span><span class="params">(<span class="meta">@Query(&quot;page&quot;)</span> String page)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@FormUrlEncoded</span></span><br><span class="line">    <span class="meta">@POST(&quot;api/users?&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;UserList&gt; <span class="title">doCreateUserWithField</span><span class="params">(<span class="meta">@Field(&quot;name&quot;)</span> String name, <span class="meta">@Field(&quot;job&quot;)</span> String job)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위의 클래스에서 Annotation을 통해 테스트 HTTP request를 작성했습니다. 해당 API로 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://reqres.in/">이곳</a>을 통해 테스트 할 것입니다.</p>
<p><code>@GET(&quot;api/unknown&quot;)</code>은  <code>doGetListResources()</code>를 호출합니다.<br><code>doGetListResources()</code>은 메서드 이름입니다. <code>MultipleResource.java</code>는 응답 객체의 Model POJO 클래스로서 Response parameter를 각각의 변수에 매핑하는 데 사용됩니다. 이러한 POJO 클래스는 메소드 리턴 유형으로 동작합니다.</p>
<h3 id="MultipleResources-java"><a href="#MultipleResources-java" class="headerlink" title="MultipleResources.java"></a>MultipleResources.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultipleResource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer page;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;per_page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer perPage;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;total&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer total;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;total_pages&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer totalPages;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;data&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Datum&gt; data = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Datum</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SerializedName(&quot;id&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Integer id;</span><br><span class="line">        <span class="meta">@SerializedName(&quot;name&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> String name;</span><br><span class="line">        <span class="meta">@SerializedName(&quot;year&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Integer year;</span><br><span class="line">        <span class="meta">@SerializedName(&quot;pantone_value&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> String pantoneValue;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@SerializedName</code> 어노테이션은 JSON 응답에서 각각의 필드를 구분하기 위해 사용합니다.</p>
<p><strong># Tip)</strong> <a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.jsonschema2pojo.org/">jsonschema2pojo</a> 에서 json 응답의 구조를 바탕으로 해당 응답에 대한 POJO 클래스를 쉽게 만들 수 있습니다.</p>
<p><img src="/images/post/2018-01-29/jsonschema2pojo.png" alt="Json Schema -&gt; POJO"></p>
<p>POJO 클래스는 Retrofit Call 클래스로 래핑됩니다. (JSONArray는 POJO 클래스의 객체 목록으로 직렬화됩니다.)</p>
<p><strong>Method Parameters</strong> : 메서드 내에서 전달할 수 있는 다양한 매개 변수 옵션이 있습니다.</p>
<ul>
<li><strong>@Body</strong> - request body로 Java 객체를 전달합니다.</li>
<li><strong>@Url</strong> - 동적인 URL이 필요할때 사용합니다.</li>
<li><strong>@Query</strong> - 쿼리를 추가할 수 있으며, 쿼리를 URL 인코딩하려면 다음과 같이 작성합니다.<br>@Query(value = “auth_token”,encoded = true) String auth_token</li>
<li><strong>@Field</strong> - POST에서만 동작하며 form-urlencoded로 데이터를 전송합니다. 이 메소드에는 @FormUrlEncoded 어노테이션이 추가되어야 합니다.</li>
</ul>
<h2 id="Android-Retrofit-예제-프로젝트-구조"><a href="#Android-Retrofit-예제-프로젝트-구조" class="headerlink" title="Android Retrofit 예제 프로젝트 구조"></a>Android Retrofit 예제 프로젝트 구조</h2><p><img src="/images/post/2018-01-29/android-retrofit-project-structure.png" alt="Android Retrofit 예제 프로젝트 구조"></p>
<p>pojo 패키지는 <strong>APIInterface.java</strong> 클래스에 정의된 각각의 API 요청 응답에 대한 4가지 모델 클래스를 정의하고 있습니다.</p>
<h3 id="User-java"><a href="#User-java" class="headerlink" title="User.java"></a>User.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;job&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String job;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String id;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;createdAt&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String createdAt;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 클래스는 <strong>createUser()</strong> 메서드에 대한 응답을 위해 사용합니다.</p>
<h3 id="UserList-java"><a href="#UserList-java" class="headerlink" title="UserList.java"></a>UserList.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer page;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;per_page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer perPage;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;total&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer total;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;total_pages&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer totalPages;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;data&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Datum&gt; data = <span class="keyword">new</span> ArrayList();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Datum</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SerializedName(&quot;id&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Integer id;</span><br><span class="line">        <span class="meta">@SerializedName(&quot;first_name&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> String first_name;</span><br><span class="line">        <span class="meta">@SerializedName(&quot;last_name&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> String last_name;</span><br><span class="line">        <span class="meta">@SerializedName(&quot;avatar&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> String avatar;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CreateUserResponse-java"><a href="#CreateUserResponse-java" class="headerlink" title="CreateUserResponse.java"></a>CreateUserResponse.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateUserResponse</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;job&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String job;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String id;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;createdAt&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String createdAt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="MainActivity-java"><a href="#MainActivity-java" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><p>**<code>MainActivity.java</code>**는 Interface 클래스에 정의된 각각의 API를 호출하고 그 결과를 Toast와 TextView를 통해 표시하고 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.journaldev.retrofitintro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.CreateUserResponse;</span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.MultipleResource;</span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.journaldev.retrofitintro.pojo.UserList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> retrofit2.Call;</span><br><span class="line"><span class="keyword">import</span> retrofit2.Callback;</span><br><span class="line"><span class="keyword">import</span> retrofit2.Response;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    TextView responseText;</span><br><span class="line">    APIInterface apiInterface;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        responseText = (TextView) findViewById(R.id.responseText);</span><br><span class="line">        apiInterface = APIClient.getClient().create(APIInterface.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         GET List Resources</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        Call&lt;MultipleResource&gt; call = apiInterface.doGetListResources();</span><br><span class="line">        call.enqueue(<span class="keyword">new</span> Callback&lt;MultipleResource&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call&lt;MultipleResource&gt; call, Response&lt;MultipleResource&gt; response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                Log.d(<span class="string">&quot;TAG&quot;</span>,response.code()+<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">                String displayResponse = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">                MultipleResource resource = response.body();</span><br><span class="line">                Integer text = resource.page;</span><br><span class="line">                Integer total = resource.total;</span><br><span class="line">                Integer totalPages = resource.totalPages;</span><br><span class="line">                List&lt;MultipleResource.Datum&gt; datumList = resource.data;</span><br><span class="line"></span><br><span class="line">                displayResponse += text + <span class="string">&quot; Page\n&quot;</span> + total + <span class="string">&quot; Total\n&quot;</span> + totalPages + <span class="string">&quot; Total Pages\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (MultipleResource.Datum datum : datumList) &#123;</span><br><span class="line">                    displayResponse += datum.id + <span class="string">&quot; &quot;</span> + datum.name + <span class="string">&quot; &quot;</span> + datum.pantoneValue + <span class="string">&quot; &quot;</span> + datum.year + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                responseText.setText(displayResponse);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call&lt;MultipleResource&gt; call, Throwable t)</span> </span>&#123;</span><br><span class="line">                call.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         Create new user</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;morpheus&quot;</span>, <span class="string">&quot;leader&quot;</span>);</span><br><span class="line">        Call&lt;User&gt; call1 = apiInterface.createUser(user);</span><br><span class="line">        call1.enqueue(<span class="keyword">new</span> Callback&lt;User&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call&lt;User&gt; call, Response&lt;User&gt; response)</span> </span>&#123;</span><br><span class="line">                User user1 = response.body();</span><br><span class="line"></span><br><span class="line">                Toast.makeText(getApplicationContext(), user1.name + <span class="string">&quot; &quot;</span> + user1.job + <span class="string">&quot; &quot;</span> + user1.id + <span class="string">&quot; &quot;</span> + user1.createdAt, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call&lt;User&gt; call, Throwable t)</span> </span>&#123;</span><br><span class="line">                call.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         GET List Users</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        Call&lt;UserList&gt; call2 = apiInterface.doGetUserList(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        call2.enqueue(<span class="keyword">new</span> Callback&lt;UserList&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call&lt;UserList&gt; call, Response&lt;UserList&gt; response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                UserList userList = response.body();</span><br><span class="line">                Integer text = userList.page;</span><br><span class="line">                Integer total = userList.total;</span><br><span class="line">                Integer totalPages = userList.totalPages;</span><br><span class="line">                List&lt;UserList.Datum&gt; datumList = userList.data;</span><br><span class="line">                Toast.makeText(getApplicationContext(), text + <span class="string">&quot; page\n&quot;</span> + total + <span class="string">&quot; total\n&quot;</span> + totalPages + <span class="string">&quot; totalPages\n&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (UserList.Datum datum : datumList) &#123;</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">&quot;id : &quot;</span> + datum.id + <span class="string">&quot; name: &quot;</span> + datum.first_name + <span class="string">&quot; &quot;</span> + datum.last_name + <span class="string">&quot; avatar: &quot;</span> + datum.avatar, Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call&lt;UserList&gt; call, Throwable t)</span> </span>&#123;</span><br><span class="line">                call.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         POST name and job Url encoded.</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        Call&lt;UserList&gt; call3 = apiInterface.doCreateUserWithField(<span class="string">&quot;morpheus&quot;</span>,<span class="string">&quot;leader&quot;</span>);</span><br><span class="line">        call3.enqueue(<span class="keyword">new</span> Callback&lt;UserList&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call&lt;UserList&gt; call, Response&lt;UserList&gt; response)</span> </span>&#123;</span><br><span class="line">                UserList userList = response.body();</span><br><span class="line">                Integer text = userList.page;</span><br><span class="line">                Integer total = userList.total;</span><br><span class="line">                Integer totalPages = userList.totalPages;</span><br><span class="line">                List&lt;UserList.Datum&gt; datumList = userList.data;</span><br><span class="line">                Toast.makeText(getApplicationContext(), text + <span class="string">&quot; page\n&quot;</span> + total + <span class="string">&quot; total\n&quot;</span> + totalPages + <span class="string">&quot; totalPages\n&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (UserList.Datum datum : datumList) &#123;</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">&quot;id : &quot;</span> + datum.id + <span class="string">&quot; name: &quot;</span> + datum.first_name + <span class="string">&quot; &quot;</span> + datum.last_name + <span class="string">&quot; avatar: &quot;</span> + datum.avatar, Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call&lt;UserList&gt; call, Throwable t)</span> </span>&#123;</span><br><span class="line">                call.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>apiInterface = APIClient.getClient().create(APIInterface.class);</code>는 APIClient를 인스턴스화 하기위해 사용됩니다.<br>API 응답에 Model 클래스를 매핑하기 위해서는 다음과 같이 사용합니다.<br><code>MultipleResource resource = response.body();</code></p>
<p>이제 앱을 실행하면 각 API를 호출하고 이에 따라 토스트 메시지를 표시합니다.</p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="http://instructure.github.io/blog/2013/12/09/volley-vs-retrofit/">Volley vs Retrofit</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.journaldev.com/13629/okhttp-android-example-tutorial">OkHttp Example</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-01-20T06:30:00.000Z" title="1/20/2018, 3:30:00 PM">2018-01-20</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-03-21T11:06:55.692Z" title="3/21/2021, 8:06:55 PM">2021-03-21</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">10분안에 읽기 (약 1546 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/01/20/Programming/android-naver-login/">OAuth 2.0과 네이버로 로그인</a></h1><div class="content"><p>안드로이드에서 <strong>&lt;네이버 아이디로 로그인&gt;</strong> 기능을 구현하며 <strong>OAuth 2.0</strong>에 대해 알아보고, 라이브러리를 적용하는 방법에 대해 알아보겠습니다.</p>
<h2 id="OAuth-2-0"><a href="#OAuth-2-0" class="headerlink" title="OAuth 2.0"></a>OAuth 2.0</h2><p>OAuth는 **<code>인증(Authentication)과 허가(Authorization)</code>**을 위한 표준 프로토콜로, 사용자가 Facebook이나 트위터 같은 인터넷 서비스의 기능을 다른 애플리케이션(데스크톱, 웹, 모바일 등)에서도 사용할 수 있게 한 것입니다.</p>
<p>Facebook이나 트위터의 기능을 이용하기 위해 사용자가 반드시 Facebook이나 트위터에 로그인해야 하는 것이 아니라, 별도의 인증 절차를 거치면 다른 서비스에서 Facebook과 트위터의 기능을 이용할 수 있게 됩니다. 이런 방식은 Facebook이나 트위터 같은 서비스 제공자뿐만 아니라 사용자와 여러 인터넷 서비스 업체 모두에 이익이 되는 생태계를 구축하는데 기여했습니다.<br>이 방식에서 사용하는 **인증 절차가 <code>OAuth</code>**입니다.</p>
<p>OAuth를 이용하면 이 인증을 공유하는 애플리케이션끼리는 별도의 인증이 필요없습니다. 따라서 여러 애플리케이션을 통합하여 사용하는 것이 가능하게 됩니다.</p>
<p><strong>OAuth 2.0은 authorization(허가, 승인)을 위한 산업 표준 프로토콜</strong>입니다. OAuth 2.0 전에 OAuth 1.0이 만들어져 사용되었지만 웹, 데스크탑, 모바일 등의 어플리케이션의 authorization flow(권한 흐름)을 보다 단순화 하는데 초점이 맞춰졌습니다.<br>(OAuth 1.0에서는 Acess Token을 받으면 계속 사용이 가능했습니다. 그러나 OAuth 2.0에서는 보안 강화를 위해 Access Token의 Life-time을 지정할 수 있게됐고, Life-time이 만료되면 Refresh Token을 통해 Access Token을 재발급을 받아야 합니다.)</p>
<h2 id="주의사항"><a href="#주의사항" class="headerlink" title="주의사항"></a>주의사항</h2><p><strong><code>로그인과 OAuth는 반드시 분리해서 이해해야 합니다.</code></strong> 아래의 예시를 통해 그 이유를 생각해봅시다.</p>
<blockquote>
<p>사원증을 이용해 출입할 수 있는 회사를 생각해 보자. 그런데 외부 손님이 그 회사에 방문할 일이 있다. 회사 사원이 건물에 출입하는 것이 로그인이라면 OAuth는 방문증을 수령한 후 회사에 출입하는 것에 비유할 수 있다. 방문증이란 사전에 정해진 곳만 다닐 수 있도록 하는 것이니, ‘방문증’을 가진 사람이 출입할 수 있는 곳과 ‘사원증’을 가진 사람이 출입할 수 있는 곳은 다르다. 역시 직접 서비스에 로그인한 사용자와 OAuth를 이용해 권한을 인증받은 사용자는 할 수 있는 일이 다르다.</p>
</blockquote>
<h2 id="구성요소"><a href="#구성요소" class="headerlink" title="구성요소"></a>구성요소</h2><ul>
<li>사용자(Resource Owner) : Service Provider에 계정을 가지고 있으면서, Client를 이용하려는 사용자</li>
<li>소비자(Client) : OAuth 인증을 사용해 Service Provider의 기능을 사용하려는 애플리케이션이나 웹 서비스</li>
<li>API 서버(Resource Server) : OAuth를 사용하는 Open API를 제공하는 서비스</li>
<li>권한 (Authroization Server) : OAuth 인증 서버</li>
<li>접근 토큰(Access Token) : 인증 후 Client가 Resource Server의 자원에 접근하기 위한 키를 포함한 값</li>
<li>갱신 토큰(Refresh Token) : 유효기간이 지난 Access Token을 갱신하기 위해 사용되는 값</li>
</ul>
<h2 id="인증과정"><a href="#인증과정" class="headerlink" title="인증과정"></a>인증과정</h2><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fnn3785mw7j31460ro435.jpg" alt="OAuth 2.0 과정"></p>
<hr>
<h2 id="네이버-아이디로-로그인"><a href="#네이버-아이디로-로그인" class="headerlink" title="네이버 아이디로 로그인"></a>네이버 아이디로 로그인</h2><p><strong><code>&lt;네이버 아이디로 로그인&gt;</code>은 OAuth 2.0 기반의 사용자 인증 기능을 제공해 네이버가 아닌 다른 서비스에서 네이버의 사용자 인증 기능을 이용할 수 있게 하는 서비스입니다.</strong> 별도의 아이디나 비밀번호를 기억할 필요 없이 네이버 아이디로 간편하고 안전하게 서비스에 로그인할 수 있어, 가입이 귀찮거나 가입한 계정이 생각나지 않아 서비스를 이탈하는 사용자를 잡을 수 있습니다.</p>
<p>&lt;네이버 아이디로 로그인&gt;을 통해 로그인하는 기본 절차는 다음과 같습니다.</p>
<ol>
<li>로그인 (네이버 앱이 설치되어 있다면 네이버 앱의 간편 로그인 기능으로 로그인, 네이버 앱이 설치되지 않았다면 애플리케이션에서 인앱 브라우저가 실행되고 네이버 로그인 화면으로 이동한다.)</li>
<li>사용자가 네이버 아이디로 로그인하면 사용자 정보에 동의하는 화면으로 이동한다.</li>
<li>사용자가 정보 제공에 동의하면 <strong>콜백 URL로 애플리케이션에 <code>접근 토큰(access token)</code>이 발급된다.</strong> 발급받은 접근 토큰을 이용해 OAuth 2.0을 지원하는 네이버의 오픈 API를 사용하거나 사용자의 정보를 얻어 올 수 있다.</li>
</ol>
<h2 id="특징"><a href="#특징" class="headerlink" title="특징"></a>특징</h2><p>네이버 아이디로 로그인한 사용자의 이름, 메일 주소, 별명, 프로필 사진, 생일, 연령대, 성별 등을 API로 간단하게 조회할 수 있습니다.</p>
<h2 id="적용-칠자"><a href="#적용-칠자" class="headerlink" title="적용 칠자"></a>적용 칠자</h2><ol>
<li>애플리케이션 등록<br>네이버 아이디로 로그인을 적용하기 위해 애플리케이션을 등록하고 <strong>클라이언트 아이디와 클라이언트 시크릿 키</strong>를 발급받는다.</li>
<li>애플리케이션 개발<br>네이버 아이디로 로그인을 이용하기 위한 정보를 확인하고 등록한 환경에 맞는 개발가이드를 참고해 애플리케이션을 개발한다.<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://developers.naver.com/docs/login/android/">- Android 튜토리얼 참고</a></li>
<li>서비스 적용<br>개발을 완료하면 서비스에 네이버 아이디로 로그인을 적용한다.</li>
</ol>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fnn43ymkojj30u01hcdhh.jpg" alt="네이버 아이디로 로그인 전"><br><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fnn449h4vyj30u01hcdif.jpg" alt="네이버 아이디로 로그인 후"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2017-12-14T07:00:00.000Z" title="12/14/2017, 4:00:00 PM">2017-12-14</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-03-21T11:04:06.899Z" title="3/21/2021, 8:04:06 PM">2021-03-21</time>&nbsp;업데이트 됨</span><span class="level-item">17분안에 읽기 (약 2475 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/14/Etc/prepare-for-employment/">신입 개발자의 취준 후기</a></h1><div class="content"><p>8월을 마지막으로 1년 2개월의 스타트업 생활을 마치고, 이번 하반기 신입 채용과정을 거쳐 3곳에 합격했습니다. 퇴사 후 부랴부랴 취업준비를 시작했는데, 이번 포스팅에서는 취업준비를 하며 <strong><code>어떤 식으로 전공 지식과 직무 면접을 준비했는지 다뤄보겠습니다!</code></strong></p>
<h3 id="자료구조와-알고리즘"><a href="#자료구조와-알고리즘" class="headerlink" title="자료구조와 알고리즘"></a>자료구조와 알고리즘</h3><p>제일 먼저 준비했던 과목은 자료구조와 알고리즘이었습니다. 제 경우 자료구조와 알고리즘이 다른 전공에 비해 많이 부족해서 가장 먼저 공부를 시작했습니다.<br>대부분 기업이 서류 통과 후 바로 <code>온라인 코딩 테스트</code> 과정이 있기 때문에, 처음부터 차근차근 이론을 공부하고 문제를 푸는것은 시간상 불가능하다고 생각했습니다. 그래서 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://code.plus/course/19">코드플러스 - SW 역량 테스트 대비</a> 강의를 통해 자주 출제되는 알고리즘들의 유형을 빠르게 익히고 비슷한 문제를 풀어보는 연습을 했습니다.</p>
<p><strong>저는 대표적인 유형의 알고리즘 같은 경우는 코드를 외울 정도로 자주 봤습니다. 사람마다 다르겠지만 제 경우에는 어느정도 문제의 틀이나 해법을 외워두니 비슷한 유형의 문제는 빠르게 풀 수 있었습니다.</strong> 처음 코딩 테스트를 준비하시는 분이라면 저처럼 대표적인 유형의 해법 정도는 외워두는게 도움이 많이 될 것 같다고 생각합니다. (당연히 이해를 바탕으로 외워야 합니다.)</p>
<p>자료구조와 알고리즘의 경우 온라인 코딩 테스트를 통과하더라도 다음 절차인 <code>(직무)면접</code>에서도 빠지지 않고 등장하는 과목입니다. <strong>저도 온라인 코딩 테스트를 통과한 후에는 방향을 바꿔서 문제를 많이 풀기보다는 자료구조의 공부에 조금 더 초점을 맞췄습니다.</strong> 이 과정에서는 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.kocw.net/home/search/kemView.do?kemId=1148815">부경대학교 권오흠 교수님 - 알고리즘</a> 강의가 큰 도움이 됐습니다.</p>
<h3 id="운영체제"><a href="#운영체제" class="headerlink" title="운영체제"></a>운영체제</h3><p>운영체제의 경우 학부생 때 가장 재밌게 공부했던 과목중 하나이다 보니 어느정도 자신있었습니다. <a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.kocw.net/home/search/kemView.do?kemId=1046323&ar=pop">이화여자대학교 반효경 교수님 - 운영체제</a> 강의를 듣고 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://book.naver.com/bookdb/book_detail.nhn?bid=4392911">운영 체제와 정보기술의 원리</a> 책을 통해서 복습하며 빠르게 개념을 다잡았습니다.</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fmge157ht0j305k086glq.jpg"></p>
<p>운영체제 과목의 경우 학부생 때 공부했을 때와는 다른 느낌이었습니다. 특히 <strong>스레드와 프로세스, 경쟁 상태 부분은 제가 주로 사용하는 Node.js의 특징을 이해하는데 큰 도움이 되었습니다.</strong> 단순히 개념공부로 끝나는 것이 아닌 실제 이러한 개념이 어떤 환경에서 어떻게 사용되고 있는지 그리고 그로 인해 어떠한 장단점이 있는지를 연관지어 생각해볼 수 있었습니다.</p>
<h3 id="데이터베이스"><a href="#데이터베이스" class="headerlink" title="데이터베이스"></a>데이터베이스</h3><p>데이터베이스는 <strong>아키텍처 구성(다중화), 트랜잭션과 동시성 제어</strong>에 중점을 맞춰 공부했습니다. 당연히 기본적인 개념은 숙지하였고, 제가 했던 프로젝트라던가 어떤 서비스를 구축함에 있어 어떻게 아키텍처를 구성해야 하는지 고민해본것이 면접에 가서 도움이 많이 되었습니다.<br>위와 같은 내용을 공부함에 있어 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://book.naver.com/bookdb/book_detail.nhn?bid=11154846">데이터베이스 첫걸음</a>이라는 책이 큰 도움이 되었습니다.</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fmm0o8hoguj30cz0goq6f.jpg"></p>
<h3 id="그-외-전산학"><a href="#그-외-전산학" class="headerlink" title="그 외 전산학"></a>그 외 전산학</h3><p>저는 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/JaeYeopHan/Interview_Question_for_Beginner">Tech Interview For Beginner</a>를 통해서 위의 전공들 뿐만 아니라 그 외 과목들에서 필요한 부분을 공부했습니다. 예비 개발자들의 기술 면접 준비를 위한 자료를 정리해놓은 Repository로서 신입 개발자로 취업을 준비하시는 분이라면 많은 도움을 받으실 수 있을 것입니다.</p>
<h3 id="나만의-강점"><a href="#나만의-강점" class="headerlink" title="나만의 강점"></a>나만의 강점</h3><p>제가 이번 하반기에 3곳에 최종합격 할 수 있었던 저만의 강점을 생각해 본다면 크게 두가지인것 같습니다.<br><strong><code>첫 번째로 개인 블로그와, 개인 프로젝트입니다.</code></strong> 저는 면접을 보며 개발에 대한 애착 혹은 자기 자기계발에 관련된 질문에는 항상 블로그와 개인 프로젝트를 통해 어필했습니다. 어떤 행동이나 습관으로 끝나는 것이 아닌 그로인한 결과물을 갖고 어필을 했던것이 큰 도움이 되었습니다.<br><strong><code>두 번째는 서비스를 직접 개발하고 운영해보았다는 점입니다.</code></strong> 1년 2개월 동안 스타트업에서 동료들과 함께 서비스를 기획하고 개발하고 운영했던 경험이 가장 큰 도움이 되었습니다. 단순히 학교 과제나 동아리 활동에서 결과물을 내는 것이 아니라, <strong>실제 사용자에게 서비스를 하기 위한 개발은 여러가지 면에서 차이가 있다고 느꼈습니다.</strong> 그런 면에서 항상 고민하고 선배 개발자 분과 이야기를 자주 나눴습니다. 제가 생각하고 고민한 방법에 대해 말씀드리고 그로 인해 다시 생길 수 있는 문제점을 생각해보고 개선해 나가는… 이런 과정들이 면접에 가서 가장 큰 도움이 되었습니다. 실제 면접에 가도 면접관 분들은 지원자가 했던 프로젝트에 대해 물어보시면서 추가적으로 어떤 문제점을 추가로 주고, 이를 면접자가 자신의 전산지식을 바탕으로 해결해가는 과정을 많이 보시는것 같습니다.</p>
<h3 id="마지막으로-드리고싶은-말씀"><a href="#마지막으로-드리고싶은-말씀" class="headerlink" title="마지막으로 드리고싶은 말씀"></a>마지막으로 드리고싶은 말씀</h3><p>간혹 제 주변 친구들 혹은 지인들이 물어봅니다. 신입 개발자로 취업하기 위해서는 어떤것을 준비해야 하는지, 내가 지금 프로젝트를 더 해야하는지, 영어 점수를 더 올려야 하는지…<br><strong>저는 먼저, 꼭 기본적인 전산학에 대한 공부부터 하시기를 추천드립니다. 결국에는 내가 프로젝트를 하고 그 프로젝트를 자소서에 적더라도, 면접에 가서는 면접관님들은 프로젝트로부터 기본적인 전산학에 관련된 내용을 요구합니다. 그렇기 때문에 꼭 기본적인 전산학 공부를 탄탄히 하시길 바랍니다. 그 후에는 자신이 했던 프로젝트로부터 관련된 전산학 내용을 꼭 정리해보셨으면 좋겠습니다.</strong> (예를 들어, Node.js를 사용했다면 Node.js의 특징인 비동기 방식에 대해 운영체제 관점에서 설명할 수 있어야 합니다.)<br>이 부분만 잘 되었다면 면접에서 어려운 질문을 받더라도, 면접관님과 대화를 하면서 문제에 접근하고 조금씩은 풀어갈 수 있는 능력이 생길거라고 생각합니다.</p>
<h3 id="주-두다지-서버개발자-양성-교육-프로그램"><a href="#주-두다지-서버개발자-양성-교육-프로그램" class="headerlink" title="(주)두다지 서버개발자 양성 교육 프로그램"></a>(주)두다지 서버개발자 양성 교육 프로그램</h3><p>두다지의 **<code>서버개발자 양성 교육 프로그램</code>**은 제가 스타트업에 있을때 많은 도움을 받았던 선배 개발자분께서 기획하고 진행하시는 프로그램입니다. 프로그램을 운영하고 계시는 홍석환 멘토님은 제가 대학생일때 멘토 멘티로 만나 스타트업에서의 생활, 그리고 취업을 준비하면서도 계속해서 많은 도움을 주셨습니다.<br><strong>스스로 다시 한 번 전산학 내용을 정리할 수 있는 시간을 가지며 기본을 탄탄히 하고, 학생때는 단순히 학점만을 위해 공부하며 키워온 제 전산학 지식을 쌓아왔다면 실제 실무에서는 어떻게 사용되는지, 필요로 하는지 다양한 경험을 통해 체감할 수 있게 해주셨습니다.</strong><br>제가 과거에 멘티로서 선배 개발자분께 배웠던 과정은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://sites.google.com/view/dudaji/study">교육 과정</a>에서 확인해 볼 수 있습니다. 교육 과정의 더 자세한 내용과 과정을 수료한 멘티들의 후기도 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://sites.google.com/view/dudaji/meetup">이곳</a>에서 확인할 수 있습니다.<br>제가 생각하는 신입개발자에게 필요한 것은 단순히 전산지식을 얼마나 많이 아느냐가 아니라, 내가 앞으로 개발하면서 그동안 공부 했던 전산지식을 바탕으로 얼마나 잘 이해하며 활용할 수 있는지 그 능력이 필요하다고 생각합니다. 두다지 교육 프로그램은 그 능력을 키울 수 있도록 방향을 잡아줄 것입니다. 관심이 있으신분은 주저하지 마시고 꼭 연락을 드려보세요!</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2017-11-20T09:00:00.000Z" title="11/20/2017, 6:00:00 PM">2017-11-20</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-03-21T11:03:02.988Z" title="3/21/2021, 8:03:02 PM">2021-03-21</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Algorithm/">Algorithm</a><span> / </span><a class="link-muted" href="/categories/Algorithm/Concept/">Concept</a></span><span class="level-item">6분안에 읽기 (약 860 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/11/20/Algorithm/Concept/priority-queue/">힙 응용 - 우선순위 큐 (Priority queue)</a></h1><div class="content"><h3 id="우선순위-큐-Priority-queue-란"><a href="#우선순위-큐-Priority-queue-란" class="headerlink" title="우선순위 큐 (Priority queue) 란?"></a>우선순위 큐 (Priority queue) 란?</h3><p>큐는 여러개의 데이터를 넣을 수 있는 자료구조 입니다. 데이터가 넣고 뺄때는 <strong>First In First Out(FIFO) 구조</strong>를 가집니다.</p>
<p><strong><code>우선순위 큐</code>는 이러한 큐의 한종류로써 <code>최대 우선순위 큐</code>와 <code>최소 우선순위 큐</code>로 나뉩니다.</strong></p>
<h3 id="최대-우선순위-큐"><a href="#최대-우선순위-큐" class="headerlink" title="최대 우선순위 큐"></a>최대 우선순위 큐</h3><p>최대 우선순위 큐는 다음의 두가지 연산을 지원하는 자료구조 입니다. (최소 우선순위 큐는 EXTRACT-MAX 대신 EXTRACT-MIN을 지원하는 자료구조입니다.)</p>
<ol>
<li><strong>INSERT(x)</strong> : 새로운 원소 x를 삽입</li>
<li><strong>EXTRACT_MAX()</strong> : 최대값을 삭제하고 반환</li>
</ol>
<p>MAX HEAP을 이용해서 최대 우선순위 큐를 구현할 수 있습니다.</p>
<h3 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h3><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1flon6ap26oj31780syn7m.jpg" alt="INSERT 과정"></p>
<p>위의 그림은 MAX HEAP의 형태로 저장되어 있는 우선순위 큐 입니다. 현재 heap은</p>
<ol>
<li>complete binary tree</li>
<li>max heap property<br>조건을 만족하기 때문에 이를 유지하면서 INSERT 연산을 하기 위해서는 고려할 사항들이 있습니다.</li>
</ol>
<p>INSERT는 새로운 노드를 추가해야하는데 <strong>complete binary tree</strong> 를 만족하기 위해서는 가장 마지막 레벨의 leaf에 추가 될 수 밖에 없습니다. 그리고 새로운 노드가 추가된 후 <strong>max heap property</strong>를 만족하기 위해서는 max-heapify 연산이 필요합니다.<br>INSERT의 의사 코드는 다음과 같습니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MAX-HEAP-<span class="built_in">INSERT</span>(A, key)&#123;</span><br><span class="line">    heap_size = heap_size + <span class="number">1</span>;</span><br><span class="line">    A[heap_size] = key;</span><br><span class="line">    i = heap_size;</span><br><span class="line">    <span class="keyword">while</span>(i &gt; <span class="number">1</span> <span class="keyword">and</span> A[<span class="built_in">PARENT</span>(i)] &lt; A[i])&#123;</span><br><span class="line">        exchange A[i] <span class="keyword">and</span> A[<span class="built_in">PARENT</span>(i)];</span><br><span class="line">        i = <span class="built_in">PARENT</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위의 코드에서 A는 heap의 사이즈를 1증가 시키고, 그 자리에 새로운 key값을 넣습니다. i는 새로 추가된 노드의 인덱스입니다.<br>그 후 while 문에서 i &gt; 1 (root 노드가 아니라는 의미) 이며, A[PARENT(i)] &lt; A[i] (부모 노드에 저장된 값보다 크다는 의미) 라면 부모 노드와 값을 교환합니다.</p>
<p>즉, 루트 노드가 될 때까지 혹은 자신의 부모 노드보다 작을 때 까지 계속해서 교환연산을 진행합니다. 따라서 시간 복잡도는 트리의 높이에 비례하게 되고, heap은 complete binary tree이므로 <code>O(nlogn)</code>입니다.</p>
<h3 id="EXTRACT-MAX"><a href="#EXTRACT-MAX" class="headerlink" title="EXTRACT_MAX"></a>EXTRACT_MAX</h3><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1flonkg61l9j314a0ro7cl.jpg" alt="EXTRACT_MAX 과정"></p>
<p>위의 그림은 EXTRACT_MAX 과정을 나타내고 있습니다. heap은 complete binary tree 성질을 유지하기 위해서 아무 노드나 삭제하는 것이 아니라 마지막 노드를 삭제하게 됩니다. 이때 루트 노드와 마지막 노드의 자리를 변경해 마지막 노드를 삭제 후 max-heapify를 통해 다시 max heap property를 만족하도록 만들 수 있습니다.<br>HEAP-EXTRACT-MAX의 의사 코드는 다음과 같습니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HEAP-EXTRACT-<span class="built_in">MAX</span>(A)&#123;</span><br><span class="line">    <span class="keyword">if</span> heap-size[A] &lt; <span class="number">1</span></span><br><span class="line">        then error <span class="string">&quot;heap underflow&quot;</span></span><br><span class="line">    max &lt;- A[<span class="number">1</span>]</span><br><span class="line">    A[<span class="number">1</span>] &lt;- A[heap-size[A]]</span><br><span class="line">    heap-size[A] &lt;- heap-size[A] - <span class="number">1</span></span><br><span class="line">    MAX-<span class="built_in">HEAPIFY</span>(A, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="C-로-구현하기"><a href="#C-로-구현하기" class="headerlink" title="C++로 구현하기"></a>C++로 구현하기</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">max_heap_insert</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, tmp;</span><br><span class="line"></span><br><span class="line">    size = size + <span class="number">1</span>;</span><br><span class="line">    a[size] = key;</span><br><span class="line"></span><br><span class="line">    i = size;</span><br><span class="line">    <span class="keyword">while</span> (i &gt; <span class="number">1</span> &amp;&amp; a[i / <span class="number">2</span>] &lt; a[i]) &#123;</span><br><span class="line">        tmp = a[i / <span class="number">2</span>];</span><br><span class="line">        a[i / <span class="number">2</span>] = a[i];</span><br><span class="line">        a[i] = tmp;</span><br><span class="line">        i = i / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">heap_extract_max</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;heap underflow\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> max = a[<span class="number">1</span>];</span><br><span class="line">    a[<span class="number">1</span>] = a[size];</span><br><span class="line">    <span class="built_in">max_heapify</span>(a, size<span class="number">-1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>출처 : 2015 봄학기 알고리즘 - 부경대 권오흠 교수님</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2017-11-19T07:35:00.000Z" title="11/19/2017, 4:35:00 PM">2017-11-19</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-03-21T11:02:53.832Z" title="3/21/2021, 8:02:53 PM">2021-03-21</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Algorithm/">Algorithm</a><span> / </span><a class="link-muted" href="/categories/Algorithm/Concept/">Concept</a></span><span class="level-item">6분안에 읽기 (약 833 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/11/19/Algorithm/Concept/heap-sort-2/">힙 정렬 (Heap sort) - 2</a></h1><div class="content"><p>저번 포스팅에서는 힙(Heap)과 max-heapify에 대해 알아보았습니다. 이번 포스팅에서는 직접 1차원 배열을 heap 구조로 변경한 후 힙 정렬을 해보겠습니다.</p>
<h3 id="1차원-배열을-힙-Heap-으로-만들기"><a href="#1차원-배열을-힙-Heap-으로-만들기" class="headerlink" title="1차원 배열을 힙(Heap) 으로 만들기"></a>1차원 배열을 힙(Heap) 으로 만들기</h3><p>먼저 의사 코드는 다음과 같습니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BUILD-MAX-HEAP</span><br><span class="line">    heap-size[A]&lt;-length[A]</span><br><span class="line">    <span class="keyword">for</span> i &lt;- |length[A]/<span class="number">2</span>| downto <span class="number">1</span></span><br><span class="line">        <span class="keyword">do</span> MAX-<span class="built_in">HEAPIFY</span>(A,i)</span><br></pre></td></tr></table></figure>
<p>i가 A 배열의 길이 / 2 부터 시작하는 이유는 리프 노드에서는 max-heapify 과정이 필요 없기 때문입니다.</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1flnftndkvwj31260yodqt.jpg" alt="BUILD-MAX-HEAP 과정"></p>
<p>힙을 만드는데의 시간 복잡도는 다음과 같습니다.<br>MAX-HEAPIFY 연산의 시간 복잡도는 log(n) 입니다. 그런데 for 문이 n/2 돌기 때문에 n/2*log(n)이며 빅 오로 표기하면 O(n*log(n))이 됩니다.<br>이는 루트 노드만 고려하여 상당히 러프하게 계산한 것이기 때문에, 정확하게 계산한다면 시간 복잡도는 **<code>O(n)</code>**이 됩니다.</p>
<h3 id="힙-정렬-Heap-sort-하기"><a href="#힙-정렬-Heap-sort-하기" class="headerlink" title="힙 정렬(Heap sort) 하기"></a>힙 정렬(Heap sort) 하기</h3><p>힙 정렬은 다음과 같은 순서로 실행됩니다.</p>
<ol>
<li>주어진 데이터를 힙으로 만든다</li>
<li>힙에서 최대값(루트 노드)을 가장 마지막 값과 바꾼다.</li>
<li>힙의 크기가 1 줄어든 것으로 간주한다. 즉, 마지막 값은 힙의 일부가 아닌것으로 간주한다.</li>
<li>루트 노드에 대해서 HEAPIFY(1)한다.</li>
<li>2~4번을 반복한다.</li>
</ol>
<p>데이터를 힙으로 만들면 인덱스 1의 값이 가장 최대값 이므로 마지막 값과 바꿉니다.<br>그리고 마지막값은 정렬된 값으로 간주하고 더 이상 신경쓰지 않아도 됩니다.<br>그렇게 줄여나간다면 결국 정렬된 상태의 배열이 완성됩니다.</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1flnhnyssc1j31bi10sqec.jpg" alt="힙 정렬 과정"></p>
<p>힙 정렬의 의사 코드는 다음과 같습니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">HEAPSORT</span>(A)</span><br><span class="line">    BUILD-MAX-<span class="built_in">HEAP</span>(A)             <span class="comment">// O(n)</span></span><br><span class="line">    <span class="keyword">for</span> i &lt;-heap-size downto <span class="number">2</span> <span class="keyword">do</span> <span class="comment">// n-1 times</span></span><br><span class="line">        exchange A[<span class="number">1</span>] &lt;-&gt; A[i]    <span class="comment">// O(1)</span></span><br><span class="line">        heap_size &lt;- heap_size <span class="number">-1</span> <span class="comment">// O(1)</span></span><br><span class="line">        MAX-<span class="built_in">HEAPIFY</span>(A,<span class="number">1</span>)          <span class="comment">// O(log(n))</span></span><br></pre></td></tr></table></figure>
<p>총 시간 복잡도는 **<code>nlogn</code>**이 됩니다.</p>
<h3 id="C-로-힙-정렬-구현하기"><a href="#C-로-힙-정렬-구현하기" class="headerlink" title="C++로 힙 정렬 구현하기"></a>C++로 힙 정렬 구현하기</h3><p>다음과 같이 C++로 힙 정렬을 구현할 수 있습니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ITEM_SIZE 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_arr</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">max_heapify</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size, <span class="keyword">int</span> idx)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left = idx * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> right = (idx * <span class="number">2</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> largest = idx;</span><br><span class="line">    <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 왼쪽 자식 노드와 비교</span></span><br><span class="line">    <span class="keyword">if</span> (left &lt; size &amp;&amp; a[left] &gt; a[largest]) &#123;</span><br><span class="line">        largest = left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 오른쪽 자식 노드와 비교</span></span><br><span class="line">    <span class="keyword">if</span> (right &lt; size &amp;&amp; a[right] &gt; a[largest]) &#123;</span><br><span class="line">        largest = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 부모 노드보다 자식 노드가 큰 경우 교환</span></span><br><span class="line">    <span class="keyword">if</span> (largest != idx) &#123;</span><br><span class="line">        tmp = a[largest];</span><br><span class="line">        a[largest] = a[idx];</span><br><span class="line">        a[idx] = tmp;</span><br><span class="line">        <span class="comment">// 재귀 호출</span></span><br><span class="line">        <span class="built_in">max_heapify</span>(a, size, largest);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build_max_heap</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = size / <span class="number">2</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">max_heapify</span>(a, size, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heap_sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">build_max_heap</span>(a, size);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> count = size - <span class="number">1</span>; count &gt; <span class="number">0</span>; count--) &#123;</span><br><span class="line">        <span class="comment">// 루트 노드를 가장 마지막 노드와 교환</span></span><br><span class="line">        tmp = a[count];</span><br><span class="line">        a[count] = a[<span class="number">1</span>];</span><br><span class="line">        a[<span class="number">1</span>] = tmp;</span><br><span class="line">        <span class="comment">// 힙 구조 유지</span></span><br><span class="line">        <span class="built_in">max_heapify</span>(a, count, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[ITEM_SIZE] = &#123; <span class="number">0</span>, &#125;; <span class="comment">// 루트 노드는 1번 인덱스 부터 시작</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; ITEM_SIZE; i++) &#123;</span><br><span class="line">        a[i] = (<span class="built_in">rand</span>() % (ITEM_SIZE * <span class="number">10</span>)) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print_arr</span>(a, ITEM_SIZE);</span><br><span class="line">    <span class="built_in">heap_sort</span>(a, ITEM_SIZE);</span><br><span class="line">    <span class="built_in">print_arr</span>(a, ITEM_SIZE);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>출처 : 2015 봄학기 알고리즘 - 부경대 권오흠 교수님</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2017-11-19T05:00:00.000Z" title="11/19/2017, 2:00:00 PM">2017-11-19</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-03-21T11:02:51.564Z" title="3/21/2021, 8:02:51 PM">2021-03-21</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Algorithm/">Algorithm</a><span> / </span><a class="link-muted" href="/categories/Algorithm/Concept/">Concept</a></span><span class="level-item">12분안에 읽기 (약 1741 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/11/19/Algorithm/Concept/heap-sort-1/">힙 정렬 (Heap sort) - 1</a></h1><div class="content"><p>힙 정렬은 <code>힙, 바이너리 힙, 이진 힙</code>이라고 부르는 자료구조를 이용하는 정렬 알고리즘입니다.</p>
<p><strong>힙 정렬의 특징</strong>은 다음과 같습니다.<br>1.최악의 경우에도 시간 복잡도가 nlogn이 되는 빠른 정렬이다.<br>2.힙 정렬은 알고리즘을 구현하는데 추가적인 배열이 필요하지 않다.<br>3.이진 힙(바이너리 힙) 자료구조를 사용한다.</p>
<p>먼저 힙 정렬을 구현하기 전에, <code>힙</code> 이라는 자료구조에 대해 알아보겠습니다.</p>
<h3 id="힙-Heap-이란"><a href="#힙-Heap-이란" class="headerlink" title="힙(Heap) 이란?"></a>힙(Heap) 이란?</h3><p>힙(Heap)은</p>
<ol>
<li>complete binary tree(완전 이진 트리) 이면서</li>
<li>heap property를 만족해야 합니다.</li>
</ol>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1flnbnxri5vj31cy0nu48n.jpg" alt="포화 이진 트리, 완전 이진 트리"></p>
<p>위의 그림에서는 **full binary tree(포화 이진 트리)**와 **complete binary tree(완전 이진 트리)**에 대해 설명하고 있습니다.</p>
<p><code>binary tree(이진 트리)</code>란 한 노드가 최대 2개의 자식 노드를 가지는 트리 입니다. 따라서, 위의 2개 트리는 모두 이진 트리입니다. 이진 트리는 이진 탐색 트리(BST)와 이진 힙(Binary Heap)의 구현에 흔히 사용됩니다.</p>
<p><code>full binary tree(포화 이진 트리)</code>란 이진 트리중에 모든 레벨의 노드 들이 꽉 차있는 형태를 말합니다.</p>
<p><code>complete binary tee(완전 이진 트리)</code>는 마지막 레벨을 제외하면 완전히 꽉 차있고, 마지막 레벨에는 가장 오른쪽 부터 연속된 몇개의 노드가 비어있을 수 있는 트리를 말합니다. 따라서 포화 이진 트리는 완전 이진 트리이기도 합니다.</p>
<p>위의 2번째 조건에서 <strong>heap property</strong>를 만족해야 한다고 했습니다. 이 heap property는 2개의 조건으로 나누어집니다.</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1flnccxerlwj31b60g0dla.jpg"></p>
<ol>
<li><strong>max heap property</strong> - 부모 노드는 자식 노드보다 데이터가 크거나 같다.</li>
<li><strong>min heap property</strong> - 부모 노드는 자식 노드보다 데이터가 크거나 작다.</li>
</ol>
<p>max와 min 모두 대칭적 관계이므로 모든 알고리즘에 적용되나 상황에 따라서 간단하게 사용할 수 있는 것을 씁니다. 여기서는 max-heap property를 다루겠습니다.</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1flnc51lx8aj31da0qqk02.jpg" alt="(a) heaps, (b,c) nonheaps"></p>
<p>(a)의 3개 트리는 모두 heap 입니다. (완전 이진 트리이면서 heap property를 만족합니다.)<br>(b)의 3개 트리는 heap이 아닙니다. (완전 이진 트리이지만, (max)heap property를 만족하지 않습니다.)<br>(c)의 2개 트리도 heap이 아닙니다. (완전 이진 트리를 만족하지 않습니다.)</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1flncuv31voj318u0da79j.jpg"></p>
<p>위의 (a), (b), (c)는 모두 다 heap입니다.<br>(a), (b), (c)는 동일한 데이터를 갖고 있는 서로 다른 heap입니다. 즉, <strong>여러가지 모양의 heap이 존재할 수 있는 것입니다.</strong></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1flncxi146tj31820h0n30.jpg"></p>
<p>Heap은 <strong>1차원 배열을 사용해 표현할 수 있습니다.</strong> 같은 레벨에서 왼쪽부터 배열로 저장하면 1차원 배열이 됩니다. 일반적인 트리에서는 부모 자식간의 관계를 식을 통해 표현할 수 없지만 Heap은 complete binary tree이므로 배열의 인덱스만으로 부모와 자식의 관계를 표현할 수 있습니다. 루트 노드가 배열의 1번 인덱스부터 시작한다면 다음과 같은 표현식을 사용할 수 있습니다.</p>
<ul>
<li>루트 노드 : A[1]</li>
<li>A[i]의 부모 노드 : A[i/2]</li>
<li>A[i]의 왼쪽 자식 노드 : A[2i]</li>
<li>A[i]의 오른쪽 자식 노드 : A[2i+1]</li>
</ul>
<p>따라서 <strong>Heap은 1차원 배열을 통해 표현이 가능하기 때문에 불필요하게 트리 자료구조를 따로 만들어 사용해 구현할 필요가 없습니다.</strong></p>
<h3 id="Max-heapify-란"><a href="#Max-heapify-란" class="headerlink" title="Max-heapify 란?"></a>Max-heapify 란?</h3><p>지금부터는 어떤 1차원 배열의 데이터가 있을 때 이 1차원 배열을 Heap으로 변환하는 과정에 대해 알아보겠습니다. (이번 포스팅에서는 max heap만을 다루기로 했으므로 max heap을 만드는 방법에 대해 알아보겠습니다.)<br>일반 1차원 배열은 <strong>max-heapify</strong>라는 연산 과정을 통해 max heap으로 만들수 있습니다.</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1flnd6rf5iij31eq0s6jzw.jpg"></p>
<p>max-heapify 연산을 하기 위한 전제조건을 위의 그림에서 보여주고 있습니다.</p>
<ol>
<li>트리의 전체 모양은 complete binary tree이다.</li>
<li>왼쪽 서브 트리(subtree)는 그 자체로 heap이다.</li>
<li>오른쪽 서브 트리(subtree)는 그 자체로 heap이다.</li>
</ol>
<p>여기서 유일하게 루트 노드만이 heap property를 만족하지 않을때, max-heapify 연산을 통해 heap property를 만족하게 만들 수 있습니다.</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1flndt24q4ij31fo0xck3z.jpg" alt="max-heapify 연산 과정"></p>
<p>위의 그림에서 루트 노드는 자신의 자식 노드중에 더 큰값과 자리를 교체 합니다. 그 후 교체된 노드에서 다시 max-heapify 연산을 통해 max-heap property를 만족할 때까지 반복합니다.</p>
<p>결국 max-heapify는 동일한 과정을 반복하고 있기 때문에 **recursion(재귀)**로 구현이 가능합니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MAX-<span class="built_in">HEAPIFY</span>(A, i)&#123;</span><br><span class="line">    <span class="keyword">if</span> there is no child of A[i]</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    k &lt;- index of the biggest child of i;</span><br><span class="line">    <span class="keyword">if</span> A[i]&gt;=A[k]</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    exchange A[i] <span class="keyword">and</span> A[k];</span><br><span class="line">    MAX-<span class="built_in">HEAPIFY</span>(A, k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>첫번째 조건은 base case로서, 자식 노드가 없다면 가장 아래의 레벨에 위치한 리프노드이기 때문에 종료합니다. 만약 자식 노드가 있다면 큰 자식 노드의 인덱스를 k로 지정합니다. 그 후  부모 노드와 값을 비교해 부모 노드가 크다면 max-heapify 과정을 종료하고, 자식 노드의 값이 크다면 부모 노드와 값을 교환한 후 다시 max-heapify를 재귀 호출 합니다.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MAX-<span class="built_in">HEAPIFY</span>(A, i)&#123;</span><br><span class="line">    <span class="keyword">while</span> A[i] has a child <span class="keyword">do</span></span><br><span class="line">        k&lt;- index of the biggest child of i;</span><br><span class="line">        <span class="keyword">if</span> A[i]&gt;= A[k];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        exchange A[i] <span class="keyword">and</span> A[k];</span><br><span class="line">        i=k;</span><br><span class="line">    end</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>같은 함수를 iterate하게 구현한 코드입니다. 주요 함수의 동작 원리는 같습니다.</p>
<p>max-heapify의 시간 복잡도는 루트 노드로부터 마지막 레벨까지 비교, 교환 연산을 하므로 트리의 높이보다 많은 시간이 필요하지 않습니다. 따라서 <strong>시간 복잡도는 높이에 의해서 결정되며, <code>O(h)</code>입니다.</strong><br>일반적인 이진트리가 아닌 complete binary tree이므로 노드의 개수를 n이라 하면, **시간 복잡도는 <code>O(logn)</code>**이 됩니다.</p>
<p>출처 : 2015 봄학기 알고리즘 - 부경대 권오흠 교수님</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/archives/10/">이전</a></div><div class="pagination-next"><a href="/archives/12/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/archives/10/">10</a></li><li><a class="pagination-link is-current" href="/archives/11/">11</a></li><li><a class="pagination-link" href="/archives/12/">12</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/archives/21/">21</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.jpeg" alt="JongMin"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">JongMin</p><p class="is-size-6 is-block">생각을 기록하자</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">125</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">205</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/jongmin92" target="_blank" rel="external nofollow noopener noreferrer">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/jongmin92"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Facebook" href="https://www.facebook.com/jongmin.kim.7796420"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithm/"><span class="level-start"><span class="level-item">Algorithm</span></span><span class="level-end"><span class="level-item tag">14</span></span></a><ul><li><a class="level is-mobile" href="/categories/Algorithm/BOJ/"><span class="level-start"><span class="level-item">BOJ</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Algorithm/Concept/"><span class="level-start"><span class="level-item">Concept</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Book/"><span class="level-start"><span class="level-item">Book</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">95</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/AWS/"><span class="level-start"><span class="level-item">AWS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Gradle/"><span class="level-start"><span class="level-item">Gradle</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/HTML/"><span class="level-start"><span class="level-item">HTML</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Linux-Ubuntu/"><span class="level-start"><span class="level-item">Linux &amp; Ubuntu</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Node/"><span class="level-start"><span class="level-item">Node</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/RaspberryPi/"><span class="level-start"><span class="level-item">RaspberryPi</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/React-Native/"><span class="level-start"><span class="level-item">React Native</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Tool/"><span class="level-start"><span class="level-item">Tool</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Project/"><span class="level-start"><span class="level-item">Project</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/Project/Emily/"><span class="level-start"><span class="level-item">Emily</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Tip/"><span class="level-start"><span class="level-item">Tip</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2021-03-20T15:17:42.000Z">2021-03-21</time></p><p class="title"><a href="/2021/03/21/Kotlin/coroutines/">코루틴 이해하기</a></p><p class="categories"><a href="/categories/Kotlin/">Kotlin</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2020-03-30T15:44:27.000Z">2020-03-31</time></p><p class="title"><a href="/2020/03/31/Java/use-assertthat/">Unit Test에서 AssertThat을 사용하자</a></p><p class="categories"><a href="/categories/Java/">Java</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2020-01-02T13:29:00.000Z">2020-01-02</time></p><p class="title"><a href="/2020/01/02/Java/rsa/">Encryption - RSA</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Java/">Java</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2019-12-26T13:23:00.000Z">2019-12-26</time></p><p class="title"><a href="/2019/12/26/Programming/2019-retrospect/">2년차 LINE 서버 개발자의 2019년 회고</a></p><p class="categories"><a href="/categories/Programming/">Programming</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2019-12-23T14:37:00.000Z">2019-12-23</time></p><p class="title"><a href="/2019/12/23/Programming/hmac/">HMAC을 이용한 무결성 보장</a></p><p class="categories"><a href="/categories/Programming/">Programming</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3921438651818825" data-ad-slot="3015269677" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="92Hz" height="28"></a><p class="is-size-7"><span>&copy; 2021 KimJongMin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>